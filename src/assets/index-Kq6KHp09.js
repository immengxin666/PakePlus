import{g as x,a as z}from"./index-Ds1LbG6U.js";import{d as M,r as _,a as Y,l as O,c as $,b as t,w as a,e as p,h as u,t as N,j as R,E as U,o as B}from"./index-D4WkKyn4.js";import"./request-Taj1ukFo.js";const A=M({__name:"index",setup(E){const b=_(),o=Y({pageNum:1,pageSize:10,total:0,list:[]}),d=Y({}),s=_(!1),g=_([]),V=n=>{switch(n){case 1:return"新建订单";case 2:return"已支付";case 3:return"已取消";default:return"未知状态"}},C=n=>{switch(n){case 1:return"info";case 2:return"success";case 3:return"danger";default:return""}},i=()=>{x(o.pageNum,o.pageSize,d).then(n=>{o.list=n.rows,o.total=n.total})},D=n=>{z(n).then(e=>{g.value=e||[],s.value=!0}).catch(()=>{U.error("获取订单明细失败")})};return O(()=>{i()}),(n,e)=>{const v=p("el-date-picker"),f=p("el-form-item"),m=p("el-button"),S=p("el-form"),r=p("el-table-column"),y=p("el-tag"),w=p("el-table"),T=p("el-pagination"),k=p("el-dialog");return B(),$("div",null,[t(S,{ref_key:"queryFormRef",ref:b,model:d,"label-width":"auto",inline:""},{default:a(()=>[t(f,{label:"预制时间",prop:"prepareTime"},{default:a(()=>[t(v,{type:"date",modelValue:d.prepareTime,"onUpdate:modelValue":e[0]||(e[0]=l=>d.prepareTime=l),format:"YYYY-MM-DD",placeholder:"请选择预制时间",clearable:"",onClear:e[1]||(e[1]=l=>(o.pageNum=1,i())),"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(f,{label:"创建时间",prop:"createTime"},{default:a(()=>[t(v,{type:"date",modelValue:d.createTime,"onUpdate:modelValue":e[2]||(e[2]=l=>d.createTime=l),format:"YYYY-MM-DD",placeholder:"请选择创建时间",clearable:"",onClear:e[3]||(e[3]=l=>(o.pageNum=1,i())),"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(f,null,{default:a(()=>[t(m,{type:"primary",onClick:i,icon:"Search"},{default:a(()=>e[11]||(e[11]=[u("搜索")])),_:1,__:[11]}),t(m,{type:"default",onClick:e[4]||(e[4]=l=>{var c;return(c=b.value)==null||c.resetFields(),o.pageNum=1,i()}),icon:"Refresh"},{default:a(()=>e[12]||(e[12]=[u("重置")])),_:1,__:[12]})]),_:1})]),_:1},8,["model"]),t(w,{data:o.list,border:"",height:"750px"},{default:a(()=>[t(r,{label:"序号",width:"80",type:"index",align:"center"}),t(r,{label:"订单编号",prop:"orderNo",align:"center"}),t(r,{label:"订单状态",prop:"orderState",align:"center"},{default:a(l=>[t(y,{type:C(l.row.orderState)},{default:a(()=>[u(N(V(l.row.orderState)),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"创建时间",prop:"createTime",align:"center"}),t(r,{label:"预制时间",prop:"prepareTime",align:"center"}),t(r,{label:"取消时间",prop:"cancelTime",align:"center"}),t(r,{label:"取消原因",prop:"cancelReason",align:"center","show-overflow-tooltip":""}),t(r,{label:"操作",align:"center"},{default:a(({row:l})=>[t(m,{type:"primary",onClick:c=>D(l.orderNo),icon:"View",plain:""},{default:a(()=>e[13]||(e[13]=[u(" 订单明细 ")])),_:2,__:[13]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(T,{"current-page":o.pageNum,"onUpdate:currentPage":e[5]||(e[5]=l=>o.pageNum=l),"page-size":o.pageSize,"onUpdate:pageSize":e[6]||(e[6]=l=>o.pageSize=l),"page-sizes":[5,10,20,30],background:"",class:"mt-5!",layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:e[7]||(e[7]=l=>(o.pageNum=1,i())),onCurrentChange:i},null,8,["current-page","page-size","total"]),t(k,{title:"订单明细",width:"800px",modelValue:s.value,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value=l),onClose:e[10]||(e[10]=l=>g.value=[])},{footer:a(()=>[R("div",null,[t(m,{size:"small",onClick:e[8]||(e[8]=l=>s.value=!1)},{default:a(()=>e[14]||(e[14]=[u("关 闭")])),_:1,__:[14]})])]),default:a(()=>[t(w,{data:g.value,border:""},{default:a(()=>[t(r,{label:"序号",width:"80",type:"index",align:"center"}),t(r,{label:"菜品名称",prop:"dishesName",align:"center"}),t(r,{label:"菜品数量",prop:"count",align:"center"},{default:a(l=>[t(y,{type:"primary"},{default:a(()=>[u(N(l.row.count),1)]),_:2},1024)]),_:1}),t(r,{label:"菜品详情",prop:"detail",align:"center","show-overflow-tooltip":"",width:"300"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}});export{A as default};
